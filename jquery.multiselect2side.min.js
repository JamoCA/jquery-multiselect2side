!function($){function internalSort(a,b){var compA=$(a).text().toUpperCase(),compB=$(b).text().toUpperCase();return compA<compB?-1:compA>compB?1:0}var methods={init:function(options){var o={selectedPosition:"right",moveOptions:!0,labelTop:"Top",labelBottom:"Bottom",labelUp:"Up",labelDown:"Down",labelSort:"Sort",labelsx:"Available",labeldx:"Selected",maxSelected:-1,autoSort:!1,autoSortAvailable:!1,search:!1,caseSensitive:!1,delay:200,optGroupSearch:!1,minSize:6};return this.each((function(){var el=$(this),html=$("html"),data=el.data("multiselect2side");options&&$.extend(o,options),data||el.data("multiselect2side",o);var originalName=$(this).attr("name");-1!=originalName.indexOf("[")&&(originalName=originalName.substring(0,originalName.indexOf("[")));var nameDx=originalName+"ms2side__dx",nameSx=originalName+"ms2side__sx",size=$(this).attr("size");size<o.minSize&&($(this).attr("size",""+o.minSize),size=o.minSize);var divUpDown="<div class='ms2side__updown'><p class='SelSort' title='Sort'>"+o.labelSort+"</p><p class='MoveTop' title='Move on top selected option'>"+o.labelTop+"</p><p class='MoveUp' title='Move up selected option'>"+o.labelUp+"</p><p class='MoveDown' title='Move down selected option'>"+o.labelDown+"</p><p class='MoveBottom' title='Move on bottom selected option'>"+o.labelBottom+"</p></div>",leftSearch=!1,rightSearch=!1;if(!1!==o.search&&!1!==o.optGroupSearch){var ss=o.optGroupSearch+"<select class='small' ><option value=__null__> </option></select> "+o.search+"<input class='small' type='text' /><a href='#'> </a>";"right"==o.selectedPosition?leftSearch=ss:rightSearch=ss}else if(!1!==o.search){var ss=o.search+"<input type='text' /><a href='#'> </a>";"right"==o.selectedPosition?leftSearch=ss:rightSearch=ss}else if(!1!==o.optGroupSearch){var ss=o.optGroupSearch+"<select><option value=__null__> </option></select>";"right"==o.selectedPosition?leftSearch=ss:rightSearch=ss}var htmlToAdd="<div class='ms2side__div'>"+("right"!=o.selectedPosition&&o.moveOptions?divUpDown:"")+"<div class='ms2side__select'>"+(o.labelsx||!1!==leftSearch?"<div class='ms2side__header'>"+(!1!==leftSearch?leftSearch:o.labelsx)+"</div>":"")+"<select title='"+o.labelsx+"' name='"+nameSx+"' id='"+nameSx+"' size='"+size+"' multiple='multiple' ></select></div><div class='ms2side__options'>"+("right"==o.selectedPosition?"<p class='AddOne' title='Add Selected'>&rsaquo;</p><p class='AddAll' title='Add All'>&raquo;</p><p class='RemoveOne' title='Remove Selected'>&lsaquo;</p><p class='RemoveAll' title='Remove All'>&laquo;</p>":"<p class='AddOne' title='Add Selected'>&lsaquo;</p><p class='AddAll' title='Add All'>&laquo;</p><p class='RemoveOne' title='Remove Selected'>&rsaquo;</p><p class='RemoveAll' title='Remove All'>&raquo;</p>")+"</div><div class='ms2side__select'>"+(o.labeldx||!1!==rightSearch?"<div class='ms2side__header'>"+(!1!==rightSearch?rightSearch:o.labeldx)+"</div>":"")+"<select title='"+o.labeldx+"' name='"+nameDx+"' id='"+nameDx+"' size='"+size+"' multiple='multiple' ></select></div>"+("right"==o.selectedPosition&&o.moveOptions?divUpDown:"")+"</div>";el.after(htmlToAdd).hide();var allSel=el.next().children(".ms2side__select").children("select"),leftSel="right"==o.selectedPosition?allSel.eq(0):allSel.eq(1),rightSel="right"==o.selectedPosition?allSel.eq(1):allSel.eq(0),heightDiv=$(".ms2side__select").eq(0).height(),searchSelect=$(),searchInput=$(this).next().find("input:text"),removeFilter=searchInput.next().hide(),toid=!1,searchV=!1;if(!1!==o.optGroupSearch){var lastOptGroupSearch=!1;searchSelect=$(this).next().find("select").eq(0),el.children("optgroup").each((function(){0==searchSelect.find("[value='"+$(this).attr("label")+"']").length&&searchSelect.append("<option value='"+$(this).attr("label")+"'>"+$(this).attr("label")+"</option>")})),searchSelect.on("change",(function(){var sEl=$(this);sEl.val()!=lastOptGroupSearch&&(""!=searchInput.val()&&(clearTimeout(toid),removeFilter.hide(),searchInput.val(""),searchV=""),setTimeout((function(){"__null__"==sEl.val()?els=el.find("option:not(:selected)"):els=el.find("optgroup[label='"+sEl.val()+"']").children("option:not(:selected)"),leftSel.find("option").remove(),els.each((function(){leftSel.append($(this).clone())})),lastOptGroupSearch=sEl.val(),leftSel.trigger("change")}),100))}))}var fto=function(){var els=leftSel.children(),toSearch=el.find("option:not(:selected)");lastOptGroupSearch="__null__",searchSelect.val("__null__"),searchV!=searchInput.val()&&(searchInput.addClass("wait").removeAttr("style"),searchV=searchInput.val(),setTimeout((function(){leftSel.children().remove(),""==searchV?(toSearch.clone().appendTo(leftSel).prop("selected",!1),removeFilter.hide()):(toSearch.each((function(){var myText=$(this).text();find=o.caseSensitive?myText.indexOf(searchV):myText.toUpperCase().indexOf(searchV.toUpperCase()),-1!=find&&$(this).clone().appendTo(leftSel).prop("selected",!1)})),0==leftSel.children().length&&searchInput.css({border:"1px red solid"}),removeFilter.show(),leftSel.trigger("change")),leftSel.trigger("change"),searchInput.removeClass("wait")}),5))};removeFilter.on("click",(function(){return clearTimeout(toid),searchInput.val(""),fto(),!1})),searchInput.on("keyup",(function(){clearTimeout(toid),toid=setTimeout(fto,o.delay)})),$(this).next().find(".ms2side__options, .ms2side__updown").each((function(){var top=heightDiv/2-$(this).height()/2;top>0&&$(this).css("padding-top",top+"px")})),$(this).find("option:selected").clone().appendTo(rightSel),$(this).find("option:not(:selected)").clone().appendTo(leftSel),html.hasClass("ie6")||html.hasClass("le-ie7")||html.hasClass("ielte7")||(leftSel.find("option").eq(0).attr("selected",!0),rightSel.children().prop("selected",!1));var nLastAutosort=0;o.autoSort&&allSel.on("change",(function(){var selectDx=rightSel.find("option");selectDx.length!=nLastAutosort&&(selectDx.sort(internalSort),el.find("option:selected").remove(),selectDx.each((function(){rightSel.append($(this).clone()),$(this).appendTo(el).attr("selected",!0)})),nLastAutosort=selectDx.length)}));var nLastAutosortAvailable=0;o.autoSortAvailable&&allSel.on("change",(function(){var selectSx=leftSel.find("option");selectSx.length!=nLastAutosortAvailable&&(selectSx.sort(internalSort),leftSel.find("option").remove(),selectSx.each((function(){leftSel.append($(this).clone())})),nLastAutosortAvailable=selectSx.length)})),allSel.on("change",(function(){(html.hasClass("ie6")||html.hasClass("le-ie7")||html.hasClass("ielte7"))&&el.show().hide();var div=$(this).parent().parent(),selectSx=leftSel.children(),selectDx=rightSel.children(),selectedSx=leftSel.find("option:selected"),selectedDx=rightSel.find("option:selected");0==selectedSx.length||o.maxSelected>=0&&selectedSx.length+selectDx.length>o.maxSelected?div.find(".AddOne").addClass("ms2side__hide"):div.find(".AddOne").removeClass("ms2side__hide"),div.find(".RemoveOne, .MoveUp, .MoveDown, .MoveTop, .MoveBottom, .SelSort").addClass("ms2side__hide"),selectDx.length>1&&div.find(".SelSort").removeClass("ms2side__hide"),selectedDx.length>0&&(div.find(".RemoveOne").removeClass("ms2side__hide"),selectedDx.length<selectDx.length&&(selectedDx.val()!=selectDx.val()&&div.find(".MoveUp, .MoveTop").removeClass("ms2side__hide"),selectedDx.last().val()!=selectDx.last().val()&&div.find(".MoveDown, .MoveBottom").removeClass("ms2side__hide"))),0==selectSx.length||o.maxSelected>=0&&selectSx.length>=o.maxSelected?div.find(".AddAll").addClass("ms2side__hide"):div.find(".AddAll").removeClass("ms2side__hide"),0==selectDx.length?div.find(".RemoveAll").addClass("ms2side__hide"):div.find(".RemoveAll").removeClass("ms2side__hide")})),leftSel.on("dblclick",(function(){$(this).find("option:selected").each((function(i,selected){(o.maxSelected<0||rightSel.children().length<o.maxSelected)&&($(this).remove().appendTo(rightSel),el.find("[value='"+$(selected).val()+"']").remove().appendTo(el).attr("selected",!0))})),$(this).trigger("change")})),rightSel.on("dblclick",(function(){$(this).find("option:selected").each((function(i,selected){$(this).remove().appendTo(leftSel),el.find("[value='"+$(selected).val()+"']").prop("selected",!1).remove().appendTo(el)})),$(this).trigger("change"),searchSelect.val("__null__").trigger("change"),removeFilter.trigger("click")})),$(this).next().find(".ms2side__options").children().on("click",(function(){$(this).hasClass("ms2side__hide")||($(this).hasClass("AddOne")?leftSel.find("option:selected").each((function(i,selected){$(this).remove().appendTo(rightSel),el.find("[value='"+$(selected).val()+"']").remove().appendTo(el).attr("selected",!0)})):$(this).hasClass("AddAll")?removeFilter.is(":visible")||searchSelect.length>0&&"__null__"!=searchSelect.val()?leftSel.children().each((function(i,selected){$(this).remove().appendTo(rightSel),el.find("[value='"+$(selected).val()+"']").remove().appendTo(el).attr("selected",!0)})):(leftSel.children().remove().appendTo(rightSel),el.find("option").attr("selected",!0)):$(this).hasClass("RemoveOne")?(rightSel.find("option:selected").each((function(i,selected){$(this).remove().appendTo(leftSel),el.find("[value='"+$(selected).val()+"']").remove().appendTo(el).prop("selected",!1)})),removeFilter.trigger("click"),searchSelect.val("__null__").trigger("change")):$(this).hasClass("RemoveAll")&&(rightSel.children().appendTo(leftSel),rightSel.children().remove(),el.find("option").prop("selected",!1),removeFilter.trigger("click"),searchSelect.val("__null__").trigger("change"))),leftSel.trigger("change")})),$(this).next().find(".ms2side__updown").children().on("click",(function(){var selectedDx=rightSel.find("option:selected"),selectDx=rightSel.find("option");if(!$(this).hasClass("ms2side__hide"))if($(this).hasClass("SelSort"))selectDx.sort(internalSort),el.find("option:selected").remove(),selectDx.each((function(){rightSel.append($(this).clone().attr("selected",!0)),el.append($(this).attr("selected",!0))}));else if($(this).hasClass("MoveUp")){var prev=selectedDx.first().prev(),hPrev=el.find("[value='"+prev.val()+"']");selectedDx.each((function(){$(this).insertBefore(prev),el.find("[value='"+$(this).val()+"']").insertBefore(hPrev)}))}else if($(this).hasClass("MoveDown")){var next=selectedDx.last().next(),hNext=el.find("[value='"+next.val()+"']");selectedDx.each((function(){$(this).insertAfter(next),el.find("[value='"+$(this).val()+"']").insertAfter(hNext)}))}else if($(this).hasClass("MoveTop")){var first=selectDx.first(),hFirst=el.find("[value='"+first.val()+"']");selectedDx.each((function(){$(this).insertBefore(first),el.find("[value='"+$(this).val()+"']").insertBefore(hFirst)}))}else if($(this).hasClass("MoveBottom")){var last=selectDx.last(),hLast=el.find("[value='"+last.val()+"']");selectedDx.each((function(){last=$(this).insertAfter(last),hLast=el.find("[value='"+$(this).val()+"']").insertAfter(hLast)}))}leftSel.trigger("change")})),$(this).next().find(".ms2side__options, .ms2side__updown").children().on("mouseenter",(function(){$(this).addClass("ms2side_hover")})).on("mouseleave",(function(){$(this).removeClass("ms2side_hover")})),leftSel.trigger("change"),$(this).next().show()}))},destroy:function(){return this.each((function(){var el=$(this),data;el.data("multiselect2side")&&el.show().next().remove()}))},addOption:function(options){var oAddOption={name:!1,value:!1,selected:!1};return this.each((function(){var el=$(this),data=el.data("multiselect2side");if(data){options&&$.extend(oAddOption,options);var strEl="<option value='"+oAddOption.value+"' "+(oAddOption.selected?"selected":"")+" >"+oAddOption.name+"</option>";el.append(strEl);var allSel=el.next().children(".ms2side__select").children("select"),leftSel="right"==data.selectedPosition?allSel.eq(0):allSel.eq(1),rightSel="right"==data.selectedPosition?allSel.eq(1):allSel.eq(0);oAddOption.selected?rightSel.append(strEl).trigger("change"):leftSel.append(strEl).trigger("change")}}))}};$.fn.multiselect2side=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.multiselect2side"):methods.init.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=jquery.multiselect2side.min.js.map